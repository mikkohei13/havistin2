{% extends "base.html" %}

    {% block head %}
    <title>Lintuatlaksen tilastoja (biomi.org)</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
    <script src="/static/leaflet-heat.js"></script> 
    {% endblock %}

    {% block breadcrumb %}
    <a href="../../../">Lintuatlas</a> &raquo; Kartta
    {% endblock %}

    {% block body %}

    <div id="largemap"></div>

    {{ html["coordinates"]|safe }}

    <script>
        var map = L.map('largemap', { scrollWheelZoom: true }).setView([63,25], 6);
        
        // Set max zoom, since too much zooming gives wrong impression of inaccurate obs locations.
        // But: this affects heat map calculations!
        //map.options.maxZoom = 14;
        
        var tiles = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',
        }).addTo(map);

        /*
        var polyLatLon = [ [60.21381179,24.83217643], [60.21663638,25.01244258], [60.30633495,25.0069948], [60.30350014,24.82623548], [60.21381179,24.83217643] ];
        var polyline = L.polyline(polyLatLon, {color: 'red'}).addTo(map);
        */

        // Array of arrays containing polygon coordinates
        var polygons = [ {{ html["coordinates"]|safe }} ];

        // Loop through the polygons array and create a separate L.polyline object for each polygon
        for (var i = 0; i < polygons.length; i++) {
            var polyline = L.polyline(polygons[i], {color: 'blue'}).addTo(map);
        }


    </script>        

    {% endblock %}
